## Запуск проекта
1. Создайте и заполните .env _(пример приведен в codechecker/.example.env)_
2. `docker-compose up --build`
3. Celery worker/beat запускаются как сервисы (celery и celery-beat в compose).
4. Откройте http://localhost:8080/login.html/ — UI; API по http://localhost:8000/api/files/.

Запуск тестов: `docker-compose exec web pytest -vv`

## О проекте
Проект разделен на 2 части - backend и frontend приложения, для их взаимодействия поднят nginx

### Frontend
Простейшее js/html приложение с базовым UI. Экраны доступны по адресам:
- http://localhost:8080/register.html - регистрация
- http://localhost:8080/login.html - вход
- http://localhost:8080/files.html - список файлов пользователя
- http://localhost:8080/upload.html - загрузка нового файла
- http://localhost:8080/file.html?id={file_id} - информация о файле пользователя
- http://localhost:8080/verify-email.html?uid={user_id}&token={token} - подтверждение почты

Само приложение имеет минимальный UI, который позволяет пользоваться API. Имеется автоматический рефреш токена 
авторизации и редирект на login при протухании refresh токена

В полноценной версии стоит предусмотреть навигацию, обработку ошибок и более приятный дизайн

### Backend
Приложение на django + DRF + celery + redis + PostgreSQL

Позволяет производить авторизацию пользователей, загрузку файлов на проверку, периодическую проверку файлов через
flake8, отправку писем на почту пользователя о проведенной проверке, удаление файлов, просмотр логов результатов
проверки. Реализованы тесты, пароли, доступы и прочие секереты вынесены в переменные окружения и 
используются docker-compose. Периодические задачи (для проверки файлов) работают на celery-beat + celery 
для выполнения задач, в качестве очереди - redis. БД с сохранением данных о проверках и пользователях - PostgreSQL

Сами сервисы вынесены в docker-compose, все переменные окружения вынесены в .env файл, есть подтверждение почты (без 
него не пускаем к авторизации в сервисе), есть startup скрипт для автоматического выполнения миграций

В полноценной версии стоит доработать сервис - оптимизировать docker файл, разнести сервисы по функциональным модулям, 
добавить фикстуры для тестов, генерацию схемы API, логирование, мониторинг, алертинг, CI/CD и т.д.

Backend полностью отделен от frontend'а за счет разнесения их по отдельным сервисом и хорошего тона в архитектуре

- http://localhost:8000/api/users/register/ - регистрация
- http://localhost:8000/api/users/login/ - авторизация
- http://localhost:8000/api/files/ - список файлов / добавление файлов
- http://localhost:8000/api/files/{file_id}/ - получение данных о файле / редактирование файла
- http://localhost:8000/api/files/{file_id}/rerun/ - перезапуск проверки файла

## Какие бывают варианты реализации периодических задач
- Cron
- Django-crontab
- **APScheduler (реализован как дополнительный способ выполнения легких периодиков)**
- **Celery Beat + Celery Worker (реализован в проекте)**
- Management Command + Cron / Systemd timer
- Django Background Tasks
